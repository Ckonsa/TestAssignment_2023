{"ast":null,"code":"import { first } from 'rxjs';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { map, switchMap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/checkout.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ChangeCheckoutComponent_form_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 2);\n    i0.ɵɵlistener(\"ngSubmit\", function ChangeCheckoutComponent_form_1_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.changeCheckout());\n    });\n    i0.ɵɵelementStart(1, \"label\");\n    i0.ɵɵtext(2, \"First Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 3);\n    i0.ɵɵelementStart(4, \"label\");\n    i0.ɵɵtext(5, \"Last Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 4);\n    i0.ɵɵelementStart(7, \"label\");\n    i0.ɵɵtext(8, \"Due Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 5)(10, \"input\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const checkout_r1 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.changeCheckoutForm);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"ngModel\", checkout_r1.borrowerFirstName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"ngModel\", checkout_r1.borrowerLastName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"ngModel\", checkout_r1.dueDate);\n  }\n}\nexport let ChangeCheckoutComponent = /*#__PURE__*/(() => {\n  class ChangeCheckoutComponent {\n    constructor(route, checkoutService) {\n      this.route = route;\n      this.checkoutService = checkoutService;\n      this.changeCheckoutForm = new FormGroup({\n        fname: new FormControl('', Validators.required),\n        lname: new FormControl('', Validators.required),\n        dueDate: new FormControl('', Validators.required)\n      });\n    }\n    ngOnInit() {\n      this.checkout$ = this.route.params.pipe(map(params => params.id)).pipe(switchMap(id => this.checkoutService.getCheckout(id)));\n      this.checkout$.pipe(first()).subscribe(checkout => {\n        if (!(checkout instanceof Error)) {\n          this.checkout = checkout;\n        }\n      });\n    }\n    changeCheckout() {\n      const checkout = {\n        id: this.checkout.id,\n        borrowerFirstName: this.changeCheckoutForm.value.fname,\n        borrowerLastName: this.changeCheckoutForm.value.lname,\n        dueDate: this.changeCheckoutForm.value.dueDate,\n        borrowedBook: this.checkout.borrowedBook,\n        checkedOutDate: this.checkout.checkedOutDate\n      };\n      // If due date is changed then it should also change for the borrowed book\n      this.checkoutService.saveCheckout(checkout);\n    }\n  }\n  ChangeCheckoutComponent.ɵfac = function ChangeCheckoutComponent_Factory(t) {\n    return new (t || ChangeCheckoutComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.CheckoutService));\n  };\n  ChangeCheckoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ChangeCheckoutComponent,\n    selectors: [[\"app-change-checkout\"]],\n    decls: 3,\n    vars: 3,\n    consts: [[1, \"container\", \"mat-elevation-z4\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [\"type\", \"text\", \"formControlName\", \"fname\", 3, \"ngModel\"], [\"type\", \"text\", \"formControlName\", \"lname\", 3, \"ngModel\"], [\"type\", \"text\", \"formControlName\", \"dueDate\", 3, \"ngModel\"], [\"type\", \"submit\", \"value\", \"SAVE\"]],\n    template: function ChangeCheckoutComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, ChangeCheckoutComponent_form_1_Template, 11, 4, \"form\", 1);\n        i0.ɵɵpipe(2, \"async\");\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 1, ctx.checkout$));\n      }\n    },\n    dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i3.AsyncPipe],\n    styles: [\".container[_ngcontent-%COMP%]{max-width:1024px;margin:3em auto;padding:2em}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;margin-top:6px;margin-bottom:16px;resize:vertical}input[type=submit][_ngcontent-%COMP%]{background-color:#6f1bce;color:#fff;padding:12px 20px;border:none;border-radius:4px;cursor:pointer}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#8143c9}\"]\n  });\n  return ChangeCheckoutComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}